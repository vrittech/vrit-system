{
    "sourceFile": "blog/serializers/blog_serializers.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 16,
            "patches": [
                {
                    "date": 1730094573253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1730096166642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,13 @@\n from rest_framework import serializers\n from ..models import Blog, BlogTags, BlogCategory\n from django.utils import timezone\n \n+\n+class BlogTagsSerializer(serializers.ModelSerializer):\n+    class Meta:\n+        model = BlogTags\n+        fields = ['id', 'name']\n class BlogListSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n \n"
                },
                {
                    "date": 1730266044102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n class BlogTagsSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = BlogTags\n         fields = ['id', 'name']\n+        \n class BlogListSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n \n@@ -32,8 +33,11 @@\n             'header_code', 'embedded_code', 'featured_image'\n         ]\n \n \n+from rest_framework import serializers\n+from ..models import Blog, BlogTags, BlogCategory\n+\n class BlogWriteSerializers(serializers.ModelSerializer):\n     tags = serializers.ListField(\n         child=serializers.CharField(max_length=155), write_only=True\n     )\n@@ -68,18 +72,33 @@\n \n         return blog\n \n     def update(self, instance, validated_data):\n-        tags_data = validated_data.pop('tags', [])\n-        category_data = validated_data.pop('category', [])\n+        tags_data = validated_data.pop('tags', None)\n+        category_data = validated_data.pop('category', None)\n+        featured_image = validated_data.pop('featured_image', None)\n \n+        # Update instance fields if data is provided\n         for attr, value in validated_data.items():\n             setattr(instance, attr, value)\n \n-        if tags_data:\n+        # Handle tags if provided\n+        if tags_data is not None:\n             instance.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n-        \n-        if category_data:\n+\n+        # Handle categories if provided\n+        if category_data is not None:\n             instance.category.set(category_data)\n \n+        # Handle featured_image specifically\n+        if featured_image is not None:\n+            if featured_image == \"null\":\n+                # If image is set to 'null', delete the current image\n+                instance.featured_image.delete(save=False)\n+                instance.featured_image = None\n+            else:\n+                # If image data is sent, update it\n+                instance.featured_image = featured_image\n+\n         instance.save()\n         return instance\n+\n"
                },
                {
                    "date": 1730266050180,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,102 @@\n+from rest_framework import serializers\n+from ..models import Blog, BlogTags, BlogCategory\n+from django.utils import timezone\n+\n+\n+class BlogTagsSerializer(serializers.ModelSerializer):\n+    class Meta:\n+        model = BlogTags\n+        fields = ['id', 'name']\n+        \n+class BlogListSerializers(serializers.ModelSerializer):\n+    category = serializers.StringRelatedField(many=True)\n+    tags = serializers.StringRelatedField(many=True)\n+\n+    class Meta:\n+        model = Blog\n+        fields = [\n+            'id', 'title', 'excerpt', 'status', 'publish_date', \n+            'created_at', 'updated_at', 'category', 'tags'\n+        ]\n+\n+\n+class BlogRetrieveSerializers(serializers.ModelSerializer):\n+    category = serializers.StringRelatedField(many=True)\n+    tags = serializers.StringRelatedField(many=True)\n+\n+    class Meta:\n+        model = Blog\n+        fields = [\n+            'id', 'title', 'description', 'status', 'publish_date', \n+            'meta_description', 'meta_keywords', 'meta_author',\n+            'created_at', 'updated_at', 'category', 'tags', \n+            'header_code', 'embedded_code', 'featured_image'\n+        ]\n+\n+\n+\n+class BlogWriteSerializers(serializers.ModelSerializer):\n+    tags = serializers.ListField(\n+        child=serializers.CharField(max_length=155), write_only=True\n+    )\n+    category = serializers.ListField(\n+        child=serializers.IntegerField(), write_only=True\n+    )\n+\n+    class Meta:\n+        model = Blog\n+        fields = [\n+            'id', 'title', 'description', 'site_title', 'excerpt', \n+            'status', 'publish_date', 'meta_description', 'meta_keywords', \n+            'meta_author', 'tags', 'category', 'header_code', 'embedded_code', \n+            'featured_image'\n+        ]\n+\n+    def validate_publish_date(self, value):\n+        \"\"\"\n+        Ensure that publish_date is in the future for scheduled blogs.\n+        \"\"\"\n+        if self.initial_data.get('status') == 'scheduled' and value <= timezone.now().date():\n+            raise serializers.ValidationError(\"Publish date must be in the future for scheduled blogs.\")\n+        return value\n+\n+    def create(self, validated_data):\n+        tags_data = validated_data.pop('tags', [])\n+        category_data = validated_data.pop('category', [])\n+        \n+        blog = Blog.objects.create(**validated_data)\n+        blog.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n+        blog.category.set(category_data)\n+\n+        return blog\n+\n+    def update(self, instance, validated_data):\n+        tags_data = validated_data.pop('tags', None)\n+        category_data = validated_data.pop('category', None)\n+        featured_image = validated_data.pop('featured_image', None)\n+\n+        # Update instance fields if data is provided\n+        for attr, value in validated_data.items():\n+            setattr(instance, attr, value)\n+\n+        # Handle tags if provided\n+        if tags_data is not None:\n+            instance.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n+\n+        # Handle categories if provided\n+        if category_data is not None:\n+            instance.category.set(category_data)\n+\n+        # Handle featured_image specifically\n+        if featured_image is not None:\n+            if featured_image == \"null\":\n+                # If image is set to 'null', delete the current image\n+                instance.featured_image.delete(save=False)\n+                instance.featured_image = None\n+            else:\n+                # If image data is sent, update it\n+                instance.featured_image = featured_image\n+\n+        instance.save()\n+        return instance\n+\n"
                },
                {
                    "date": 1731321750959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,112 +63,14 @@\n     def create(self, validated_data):\n         tags_data = validated_data.pop('tags', [])\n         category_data = validated_data.pop('category', [])\n         \n-        blog = Blog.objects.create(**validated_data)\n-        blog.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n-        blog.category.set(category_data)\n+         user = self.context['request'].user\n+        full_name = user.full_name or user.username  \n \n-        return blog\n-\n-    def update(self, instance, validated_data):\n-        tags_data = validated_data.pop('tags', None)\n-        category_data = validated_data.pop('category', None)\n-        featured_image = validated_data.pop('featured_image', None)\n-\n-        # Update instance fields if data is provided\n-        for attr, value in validated_data.items():\n-            setattr(instance, attr, value)\n-\n-        # Handle tags if provided\n-        if tags_data is not None:\n-            instance.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n-\n-        # Handle categories if provided\n-        if category_data is not None:\n-            instance.category.set(category_data)\n-\n-        # Handle featured_image specifically\n-        if featured_image is not None:\n-            if featured_image == \"null\":\n-                # If image is set to 'null', delete the current image\n-                instance.featured_image.delete(save=False)\n-                instance.featured_image = None\n-            else:\n-                # If image data is sent, update it\n-                instance.featured_image = featured_image\n-\n-        instance.save()\n-        return instance\n-\n-from rest_framework import serializers\n-from ..models import Blog, BlogTags, BlogCategory\n-from django.utils import timezone\n-\n-\n-class BlogTagsSerializer(serializers.ModelSerializer):\n-    class Meta:\n-        model = BlogTags\n-        fields = ['id', 'name']\n+        validated_data['created_by'] = full_name\n+        validated_data['user'] = user\n         \n-class BlogListSerializers(serializers.ModelSerializer):\n-    category = serializers.StringRelatedField(many=True)\n-    tags = serializers.StringRelatedField(many=True)\n-\n-    class Meta:\n-        model = Blog\n-        fields = [\n-            'id', 'title', 'excerpt', 'status', 'publish_date', \n-            'created_at', 'updated_at', 'category', 'tags'\n-        ]\n-\n-\n-class BlogRetrieveSerializers(serializers.ModelSerializer):\n-    category = serializers.StringRelatedField(many=True)\n-    tags = serializers.StringRelatedField(many=True)\n-\n-    class Meta:\n-        model = Blog\n-        fields = [\n-            'id', 'title', 'description', 'status', 'publish_date', \n-            'meta_description', 'meta_keywords', 'meta_author',\n-            'created_at', 'updated_at', 'category', 'tags', \n-            'header_code', 'embedded_code', 'featured_image'\n-        ]\n-\n-\n-from rest_framework import serializers\n-from ..models import Blog, BlogTags, BlogCategory\n-\n-class BlogWriteSerializers(serializers.ModelSerializer):\n-    tags = serializers.ListField(\n-        child=serializers.CharField(max_length=155), write_only=True\n-    )\n-    category = serializers.ListField(\n-        child=serializers.IntegerField(), write_only=True\n-    )\n-\n-    class Meta:\n-        model = Blog\n-        fields = [\n-            'id', 'title', 'description', 'site_title', 'excerpt', \n-            'status', 'publish_date', 'meta_description', 'meta_keywords', \n-            'meta_author', 'tags', 'category', 'header_code', 'embedded_code', \n-            'featured_image'\n-        ]\n-\n-    def validate_publish_date(self, value):\n-        \"\"\"\n-        Ensure that publish_date is in the future for scheduled blogs.\n-        \"\"\"\n-        if self.initial_data.get('status') == 'scheduled' and value <= timezone.now().date():\n-            raise serializers.ValidationError(\"Publish date must be in the future for scheduled blogs.\")\n-        return value\n-\n-    def create(self, validated_data):\n-        tags_data = validated_data.pop('tags', [])\n-        category_data = validated_data.pop('category', [])\n-        \n         blog = Blog.objects.create(**validated_data)\n         blog.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n         blog.category.set(category_data)\n \n"
                },
                {
                    "date": 1731321773488,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,9 +63,9 @@\n     def create(self, validated_data):\n         tags_data = validated_data.pop('tags', [])\n         category_data = validated_data.pop('category', [])\n         \n-         user = self.context['request'].user\n+        user = self.context['request'].user\n         full_name = user.full_name or user.username  \n \n         validated_data['created_by'] = full_name\n         validated_data['user'] = user\n@@ -79,8 +79,13 @@\n     def update(self, instance, validated_data):\n         tags_data = validated_data.pop('tags', None)\n         category_data = validated_data.pop('category', None)\n         featured_image = validated_data.pop('featured_image', None)\n+        \n+        user = self.context['request'].user\n+        full_name = user.full_name or user.username  \n+        validated_data['created_by'] = full_name\n+        validated_data['user'] = user\n \n         # Update instance fields if data is provided\n         for attr, value in validated_data.items():\n             setattr(instance, attr, value)\n"
                },
                {
                    "date": 1731321849475,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,12 +13,9 @@\n     tags = serializers.StringRelatedField(many=True)\n \n     class Meta:\n         model = Blog\n-        fields = [\n-            'id', 'title', 'excerpt', 'status', 'publish_date', \n-            'created_at', 'updated_at', 'category', 'tags'\n-        ]\n+        fields =\n \n \n class BlogRetrieveSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n"
                },
                {
                    "date": 1731321864397,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,23 +13,18 @@\n     tags = serializers.StringRelatedField(many=True)\n \n     class Meta:\n         model = Blog\n-        fields =\n+        fields = '__all__'\n \n \n class BlogRetrieveSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n \n     class Meta:\n         model = Blog\n-        fields = [\n-            'id', 'title', 'description', 'status', 'publish_date', \n-            'meta_description', 'meta_keywords', 'meta_author',\n-            'created_at', 'updated_at', 'category', 'tags', \n-            'header_code', 'embedded_code', 'featured_image'\n-        ]\n+        fields = '__all__'\n \n \n \n class BlogWriteSerializers(serializers.ModelSerializer):\n"
                },
                {
                    "date": 1731321871148,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,14 +36,9 @@\n     )\n \n     class Meta:\n         model = Blog\n-        fields = [\n-            'id', 'title', 'description', 'site_title', 'excerpt', \n-            'status', 'publish_date', 'meta_description', 'meta_keywords', \n-            'meta_author', 'tags', 'category', 'header_code', 'embedded_code', \n-            'featured_image'\n-        ]\n+        fields = '__all__'\n \n     def validate_publish_date(self, value):\n         \"\"\"\n         Ensure that publish_date is in the future for scheduled blogs.\n"
                },
                {
                    "date": 1731322091479,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,13 @@\n from ..models import Blog, BlogTags, BlogCategory\n from django.utils import timezone\n \n \n+class BlogUserSerializer(serializers.ModelSerializer):\n+    class Meta:\n+        model = CustomUser\n+        fields = ['full_name', 'image']  \n+\n class BlogTagsSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = BlogTags\n         fields = ['id', 'name']\n"
                },
                {
                    "date": 1731322101310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n from rest_framework import serializers\n from ..models import Blog, BlogTags, BlogCategory\n from django.utils import timezone\n+from accounts.models import c\n \n \n class BlogUserSerializer(serializers.ModelSerializer):\n     class Meta:\n"
                },
                {
                    "date": 1731322107718,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,17 @@\n from rest_framework import serializers\n from ..models import Blog, BlogTags, BlogCategory\n from django.utils import timezone\n-from accounts.models import c\n+from accounts.models import CustomUser\n \n \n class BlogUserSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = CustomUser\n         fields = ['full_name', 'image']  \n \n class BlogTagsSerializer(serializers.ModelSerializer):\n+    \n     class Meta:\n         model = BlogTags\n         fields = ['id', 'name']\n         \n"
                },
                {
                    "date": 1731322114396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,16 +9,16 @@\n         model = CustomUser\n         fields = ['full_name', 'image']  \n \n class BlogTagsSerializer(serializers.ModelSerializer):\n-    \n     class Meta:\n         model = BlogTags\n         fields = ['id', 'name']\n         \n class BlogListSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n+    \n \n     class Meta:\n         model = Blog\n         fields = '__all__'\n"
                },
                {
                    "date": 1731322121122,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,10 @@\n         \n class BlogListSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n+    user = BlogUserSerializer(read_only=True)\n+\n     \n \n     class Meta:\n         model = Blog\n"
                },
                {
                    "date": 1731322127708,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,19 +18,19 @@\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n     user = BlogUserSerializer(read_only=True)\n \n-    \n-\n     class Meta:\n         model = Blog\n         fields = '__all__'\n \n \n class BlogRetrieveSerializers(serializers.ModelSerializer):\n     category = serializers.StringRelatedField(many=True)\n     tags = serializers.StringRelatedField(many=True)\n+    user = BlogUserSerializer(read_only=True)\n \n+\n     class Meta:\n         model = Blog\n         fields = '__all__'\n \n"
                },
                {
                    "date": 1731322399523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n \n class BlogUserSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = CustomUser\n-        fields = ['full_name', 'image']  \n+       fields = ['full_name','professional_image']  \n \n class BlogTagsSerializer(serializers.ModelSerializer):\n     class Meta:\n         model = BlogTags\n"
                },
                {
                    "date": 1731396451071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,8 +55,9 @@\n         if self.initial_data.get('status') == 'scheduled' and value <= timezone.now().date():\n             raise serializers.ValidationError(\"Publish date must be in the future for scheduled blogs.\")\n         return value\n     \n+    \n \n     def create(self, validated_data):\n         tags_data = validated_data.pop('tags', [])\n         category_data = validated_data.pop('category', [])\n"
                }
            ],
            "date": 1730094573253,
            "name": "Commit-0",
            "content": "from rest_framework import serializers\nfrom ..models import Blog, BlogTags, BlogCategory\nfrom django.utils import timezone\n\nclass BlogListSerializers(serializers.ModelSerializer):\n    category = serializers.StringRelatedField(many=True)\n    tags = serializers.StringRelatedField(many=True)\n\n    class Meta:\n        model = Blog\n        fields = [\n            'id', 'title', 'excerpt', 'status', 'publish_date', \n            'created_at', 'updated_at', 'category', 'tags'\n        ]\n\n\nclass BlogRetrieveSerializers(serializers.ModelSerializer):\n    category = serializers.StringRelatedField(many=True)\n    tags = serializers.StringRelatedField(many=True)\n\n    class Meta:\n        model = Blog\n        fields = [\n            'id', 'title', 'description', 'status', 'publish_date', \n            'meta_description', 'meta_keywords', 'meta_author',\n            'created_at', 'updated_at', 'category', 'tags', \n            'header_code', 'embedded_code', 'featured_image'\n        ]\n\n\nclass BlogWriteSerializers(serializers.ModelSerializer):\n    tags = serializers.ListField(\n        child=serializers.CharField(max_length=155), write_only=True\n    )\n    category = serializers.ListField(\n        child=serializers.IntegerField(), write_only=True\n    )\n\n    class Meta:\n        model = Blog\n        fields = [\n            'id', 'title', 'description', 'site_title', 'excerpt', \n            'status', 'publish_date', 'meta_description', 'meta_keywords', \n            'meta_author', 'tags', 'category', 'header_code', 'embedded_code', \n            'featured_image'\n        ]\n\n    def validate_publish_date(self, value):\n        \"\"\"\n        Ensure that publish_date is in the future for scheduled blogs.\n        \"\"\"\n        if self.initial_data.get('status') == 'scheduled' and value <= timezone.now().date():\n            raise serializers.ValidationError(\"Publish date must be in the future for scheduled blogs.\")\n        return value\n\n    def create(self, validated_data):\n        tags_data = validated_data.pop('tags', [])\n        category_data = validated_data.pop('category', [])\n        \n        blog = Blog.objects.create(**validated_data)\n        blog.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n        blog.category.set(category_data)\n\n        return blog\n\n    def update(self, instance, validated_data):\n        tags_data = validated_data.pop('tags', [])\n        category_data = validated_data.pop('category', [])\n\n        for attr, value in validated_data.items():\n            setattr(instance, attr, value)\n\n        if tags_data:\n            instance.tags.set(Blog.tag_manager.get_or_create_tags(tags_data))\n        \n        if category_data:\n            instance.category.set(category_data)\n\n        instance.save()\n        return instance\n"
        }
    ]
}